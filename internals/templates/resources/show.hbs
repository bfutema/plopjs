import { injectable, inject } from 'tsyringe';

import { AppError } from '@shared/errors/AppError';

import { {{properCase entity_name}} } from '../app/typeorm/entities/{{properCase entity_name}}';
import { IShow{{properCase entity_name}} } from '../contracts/I{{properCase entity_name}}DTO';
import { I{{fromResourcesGetPluralized entity_name}}Repository } from '../repositories/I{{fromResourcesGetPluralized entity_name}}Repository';

@injectable()
class Show{{properCase entity_name}}Service {
  constructor(
    @inject('{{fromResourcesGetPluralized entity_name}}Repository')
    private {{fromResourcesGetEntityNamePluralizedVariable entity_name}}Repository: I{{fromResourcesGetPluralized entity_name}}Repository,
  ) {}

  public async execute({ id }: IShow{{properCase entity_name}}): Promise<{{properCase entity_name}}> {
    const {{fromResourcesGetEntityNameSingularizedVariable entity_name}} = await this.{{fromResourcesGetEntityNamePluralizedVariable entity_name}}Repository.findById({ id });

    if (!{{fromResourcesGetEntityNameSingularizedVariable entity_name}}) {
      throw new AppError('{{properCase entity_name}} not found!', 404);
    }

    return {{fromResourcesGetEntityNameSingularizedVariable entity_name}};
  }
}

export { Show{{properCase entity_name}}Service };
