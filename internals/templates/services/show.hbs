import { injectable, inject } from 'tsyringe';

import { AppError } from '@shared/errors/AppError';

import { {{getEntityNameSingularized entity_reference}} } from '../app/typeorm/entities/{{getEntityNameSingularized entity_reference}}';
import { IShow{{getEntityNameSingularized entity_reference}} } from '../contracts/I{{getEntityNameSingularized entity_reference}}DTO';
import { I{{getEntityNamePluralized entity_reference}}Repository } from '../repositories/I{{getEntityNamePluralized entity_reference}}Repository';

@injectable()
class Show{{getEntityNameSingularized entity_reference}}Service {
  constructor(
    @inject('{{getEntityNamePluralized entity_reference}}Repository')
    private {{fromServicesGetEntityNamePluralizedVariable entity_reference}}Repository: I{{getEntityNamePluralized entity_reference}}Repository,
  ) {}

  public async execute({ id }: IShow{{getEntityNameSingularized entity_reference}}): Promise<{{getEntityNameSingularized entity_reference}}> {
    const {{fromServicesGetEntityNameSingularizedVariable entity_reference}} = await this.{{fromServicesGetEntityNamePluralizedVariable entity_reference}}Repository.findById({ id });

    if (!{{fromServicesGetEntityNameSingularizedVariable entity_reference}}) {
      throw new AppError('{{getEntityNameSingularized entity_reference}} not found!', 404);
    }

    return {{fromServicesGetEntityNameSingularizedVariable entity_reference}};
  }
}

export { Show{{getEntityNameSingularized entity_reference}}Service };
